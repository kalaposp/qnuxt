import{a as n,u as G,t as ve,q as ce,d as de,E as fe,w as be,e as Pe,h as me,A as R,I as M,n as te,f as W,g as U,l as ge,N as Z,v as he,j as H,k as X,i as L,b as N,P as j,m as O,p as T,r as V}from"./DbalAbJr.js";import{f as w,j as z,P as K,l as _,m as k,W as J,D as F,F as q,q as le,aa as Se,X as Q,o as ne,c as oe,a as ae}from"./DlQWd_6M.js";function ee(r,i){if(r)return r;let p=i??"button";if(typeof p=="string"&&p.toLowerCase()==="button")return"button"}function ye(r,i){let p=w(ee(r.value.type,r.value.as));return z(()=>{p.value=ee(r.value.type,r.value.as)}),K(()=>{var E;p.value||n(i)&&n(i)instanceof HTMLButtonElement&&!((E=n(i))!=null&&E.hasAttribute("type"))&&(p.value="button")}),p}var we=(r=>(r[r.Open=0]="Open",r[r.Closed=1]="Closed",r))(we||{});let re=Symbol("PopoverContext");function Y(r){let i=Q(re,null);if(i===null){let p=new Error(`<${r} /> is missing a parent <${$e.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,Y),p}return i}let ue=Symbol("PopoverGroupContext");function se(){return Q(ue,null)}let ie=Symbol("PopoverPanelContext");function Ee(){return Q(ie,null)}let $e=_({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(r,{slots:i,attrs:p,expose:E}){var h;let b=w(null);E({el:b,$el:b});let l=w(1),t=w(null),y=w(null),S=w(null),m=w(null),P=k(()=>H(b)),v=k(()=>{var e,a;if(!n(t)||!n(m))return!1;for(let D of document.querySelectorAll("body > *"))if(Number(D==null?void 0:D.contains(n(t)))^Number(D==null?void 0:D.contains(n(m))))return!0;let o=X(),f=o.indexOf(n(t)),B=(f+o.length-1)%o.length,C=(f+1)%o.length,A=o[B],pe=o[C];return!((e=n(m))!=null&&e.contains(A))&&!((a=n(m))!=null&&a.contains(pe))}),u={popoverState:l,buttonId:w(null),panelId:w(null),panel:m,button:t,isPortalled:v,beforePanelSentinel:y,afterPanelSentinel:S,togglePopover(){l.value=G(l.value,{0:1,1:0})},closePopover(){l.value!==1&&(l.value=1)},close(e){u.closePopover();let a=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?n(e):n(u.button):n(u.button);a==null||a.focus()}};J(re,u),ve(k(()=>G(l.value,{0:L.Open,1:L.Closed})));let $={buttonId:u.buttonId,panelId:u.panelId,close(){u.closePopover()}},g=se(),I=g==null?void 0:g.registerPopover,[x,c]=ce(),d=de({mainTreeNodeRef:g==null?void 0:g.mainTreeNodeRef,portals:x,defaultContainers:[t,m]});function s(){var e,a,o,f;return(f=g==null?void 0:g.isFocusWithinPopoverGroup())!=null?f:((e=P.value)==null?void 0:e.activeElement)&&(((a=n(t))==null?void 0:a.contains(P.value.activeElement))||((o=n(m))==null?void 0:o.contains(P.value.activeElement)))}return K(()=>I==null?void 0:I($)),fe((h=P.value)==null?void 0:h.defaultView,"focus",e=>{var a,o;e.target!==window&&e.target instanceof HTMLElement&&l.value===0&&(s()||t&&m&&(d.contains(e.target)||(a=n(u.beforePanelSentinel))!=null&&a.contains(e.target)||(o=n(u.afterPanelSentinel))!=null&&o.contains(e.target)||u.closePopover()))},!0),be(d.resolveContainers,(e,a)=>{var o;u.closePopover(),Pe(a,me.Loose)||(e.preventDefault(),(o=n(t))==null||o.focus())},k(()=>l.value===0)),()=>{let e={open:l.value===0,close:u.close};return F(q,[F(c,{},()=>R({theirProps:{...r,...p},ourProps:{ref:b},slot:e,slots:i,attrs:p,name:"Popover"})),F(d.MainTreeNode)])}}}),Ie=_({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(r,{attrs:i,slots:p,expose:E}){var h;let b=(h=r.id)!=null?h:`headlessui-popover-button-${M()}`,l=Y("PopoverButton"),t=k(()=>H(l.button));E({el:l.button,$el:l.button}),z(()=>{l.buttonId.value=b}),le(()=>{l.buttonId.value=null});let y=se(),S=y==null?void 0:y.closeOthers,m=Ee(),P=k(()=>m===null?!1:m.value===l.panelId.value),v=w(null),u=`headlessui-focus-sentinel-${M()}`;P.value||K(()=>{l.button.value=n(v)});let $=ye(k(()=>({as:r.as,type:i.type})),v);function g(e){var a,o,f,B,C;if(P.value){if(l.popoverState.value===1)return;switch(e.key){case N.Space:case N.Enter:e.preventDefault(),(o=(a=e.target).click)==null||o.call(a),l.closePopover(),(f=n(l.button))==null||f.focus();break}}else switch(e.key){case N.Space:case N.Enter:e.preventDefault(),e.stopPropagation(),l.popoverState.value===1&&(S==null||S(l.buttonId.value)),l.togglePopover();break;case N.Escape:if(l.popoverState.value!==0)return S==null?void 0:S(l.buttonId.value);if(!n(l.button)||(B=t.value)!=null&&B.activeElement&&!((C=n(l.button))!=null&&C.contains(t.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),l.closePopover();break}}function I(e){P.value||e.key===N.Space&&e.preventDefault()}function x(e){var a,o;r.disabled||(P.value?(l.closePopover(),(a=n(l.button))==null||a.focus()):(e.preventDefault(),e.stopPropagation(),l.popoverState.value===1&&(S==null||S(l.buttonId.value)),l.togglePopover(),(o=n(l.button))==null||o.focus()))}function c(e){e.preventDefault(),e.stopPropagation()}let d=te();function s(){let e=n(l.panel);if(!e)return;function a(){G(d.value,{[T.Forwards]:()=>j(e,O.First),[T.Backwards]:()=>j(e,O.Last)})===V.Error&&j(X().filter(o=>o.dataset.headlessuiFocusGuard!=="true"),G(d.value,{[T.Forwards]:O.Next,[T.Backwards]:O.Previous}),{relativeTo:n(l.button)})}a()}return()=>{let e=l.popoverState.value===0,a={open:e},{...o}=r,f=P.value?{ref:v,type:$.value,onKeydown:g,onClick:x}:{ref:v,id:b,type:$.value,"aria-expanded":l.popoverState.value===0,"aria-controls":n(l.panel)?l.panelId.value:void 0,disabled:r.disabled?!0:void 0,onKeydown:g,onKeyup:I,onClick:x,onMousedown:c};return F(q,[R({ourProps:f,theirProps:{...i,...o},slot:a,attrs:i,slots:p,name:"PopoverButton"}),e&&!P.value&&l.isPortalled.value&&F(W,{id:u,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:s})])}}}),xe=_({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(r,{attrs:i,slots:p,expose:E}){var h;let b=(h=r.id)!=null?h:`headlessui-popover-panel-${M()}`,{focus:l}=r,t=Y("PopoverPanel"),y=k(()=>H(t.panel)),S=`headlessui-focus-sentinel-before-${M()}`,m=`headlessui-focus-sentinel-after-${M()}`;E({el:t.panel,$el:t.panel}),z(()=>{t.panelId.value=b}),le(()=>{t.panelId.value=null}),J(ie,t.panelId),K(()=>{var c,d;if(!l||t.popoverState.value!==0||!t.panel)return;let s=(c=y.value)==null?void 0:c.activeElement;(d=n(t.panel))!=null&&d.contains(s)||j(n(t.panel),O.First)});let P=ge(),v=k(()=>P!==null?(P.value&L.Open)===L.Open:t.popoverState.value===0);function u(c){var d,s;switch(c.key){case N.Escape:if(t.popoverState.value!==0||!n(t.panel)||y.value&&!((d=n(t.panel))!=null&&d.contains(y.value.activeElement)))return;c.preventDefault(),c.stopPropagation(),t.closePopover(),(s=n(t.button))==null||s.focus();break}}function $(c){var d,s,e,a,o;let f=c.relatedTarget;f&&n(t.panel)&&((d=n(t.panel))!=null&&d.contains(f)||(t.closePopover(),((e=(s=n(t.beforePanelSentinel))==null?void 0:s.contains)!=null&&e.call(s,f)||(o=(a=n(t.afterPanelSentinel))==null?void 0:a.contains)!=null&&o.call(a,f))&&f.focus({preventScroll:!0})))}let g=te();function I(){let c=n(t.panel);if(!c)return;function d(){G(g.value,{[T.Forwards]:()=>{var s;j(c,O.First)===V.Error&&((s=n(t.afterPanelSentinel))==null||s.focus())},[T.Backwards]:()=>{var s;(s=n(t.button))==null||s.focus({preventScroll:!0})}})}d()}function x(){let c=n(t.panel);if(!c)return;function d(){G(g.value,{[T.Forwards]:()=>{let s=n(t.button),e=n(t.panel);if(!s)return;let a=X(),o=a.indexOf(s),f=a.slice(0,o+1),B=[...a.slice(o+1),...f];for(let C of B.slice())if(C.dataset.headlessuiFocusGuard==="true"||e!=null&&e.contains(C)){let A=B.indexOf(C);A!==-1&&B.splice(A,1)}j(B,O.First,{sorted:!1})},[T.Backwards]:()=>{var s;j(c,O.Previous)===V.Error&&((s=n(t.button))==null||s.focus())}})}d()}return()=>{let c={open:t.popoverState.value===0,close:t.close},{focus:d,...s}=r,e={ref:t.panel,id:b,onKeydown:u,onFocusout:l&&t.popoverState.value===0?$:void 0,tabIndex:-1};return R({ourProps:e,theirProps:{...i,...s},attrs:i,slot:c,slots:{...p,default:(...a)=>{var o;return[F(q,[v.value&&t.isPortalled.value&&F(W,{id:S,ref:t.beforePanelSentinel,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:I}),(o=p.default)==null?void 0:o.call(p,...a),v.value&&t.isPortalled.value&&F(W,{id:m,ref:t.afterPanelSentinel,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:x})])]}},features:Z.RenderStrategy|Z.Static,visible:v.value,name:"PopoverPanel"})}}}),Be=_({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(r,{attrs:i,slots:p,expose:E}){let h=w(null),b=Se([]),l=k(()=>H(h)),t=he();E({el:h,$el:h});function y(v){let u=b.value.indexOf(v);u!==-1&&b.value.splice(u,1)}function S(v){return b.value.push(v),()=>{y(v)}}function m(){var v;let u=l.value;if(!u)return!1;let $=u.activeElement;return(v=n(h))!=null&&v.contains($)?!0:b.value.some(g=>{var I,x;return((I=u.getElementById(g.buttonId.value))==null?void 0:I.contains($))||((x=u.getElementById(g.panelId.value))==null?void 0:x.contains($))})}function P(v){for(let u of b.value)u.buttonId.value!==v&&u.close()}return J(ue,{registerPopover:S,unregisterPopover:y,isFocusWithinPopoverGroup:m,closeOthers:P,mainTreeNodeRef:t.mainTreeNodeRef}),()=>F(q,[R({ourProps:{ref:h},theirProps:{...r,...i},slot:{},attrs:i,slots:p,name:"PopoverGroup"}),F(t.MainTreeNode)])}});function Ce(r,i){return ne(),oe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[ae("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})])}function Oe(r,i){return ne(),oe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[ae("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}export{Be as A,Ie as G,Oe as a,xe as j,Ce as r,ye as s,$e as y};
