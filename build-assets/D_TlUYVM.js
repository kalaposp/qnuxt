import{q as pe,N as ve,E as ce,w as de,n as Z,v as fe,d as C}from"./B7yVtwKY.js";import{a as M,o,w as be,h as Pe,A as R,I as j,f as q,u as U,N as Y,b as T,i as H,E as W,P as G,d as O,c as V}from"./BeTu4D13.js";import{s as me}from"./BxZrIA5R.js";import{t as ge,l as Se,i as L}from"./e8uhHpLU.js";import{D as K,r as E,G as $,H as J,f as z,E as k,F as _,n as ee,I as te,a5 as he,J as Q,o as le,c as oe,a as ne}from"./C396K-2g.js";var we=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(we||{});let ae=Symbol("PopoverContext");function X(s){let d=Q(ae,null);if(d===null){let S=new Error(`<${s} /> is missing a parent <${Ee.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,X),S}return d}let re=Symbol("PopoverGroupContext");function ue(){return Q(re,null)}let se=Symbol("PopoverPanelContext");function ye(){return Q(se,null)}let Ee=K({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(s,{slots:d,attrs:S,expose:N}){var g;let f=E(null);N({el:f,$el:f});let l=E(1),t=E(null),w=E(null),h=E(null),P=E(null),b=$(()=>H(f)),i=$(()=>{var e,a;if(!o(t)||!o(P))return!1;for(let A of document.querySelectorAll("body > *"))if(Number(A==null?void 0:A.contains(o(t)))^Number(A==null?void 0:A.contains(o(P))))return!0;let n=W(),c=n.indexOf(o(t)),x=(c+n.length-1)%n.length,B=(c+1)%n.length,D=n[x],ie=n[B];return!((e=o(P))!=null&&e.contains(D))&&!((a=o(P))!=null&&a.contains(ie))}),r={popoverState:l,buttonId:E(null),panelId:E(null),panel:P,button:t,isPortalled:i,beforePanelSentinel:w,afterPanelSentinel:h,togglePopover(){l.value=M(l.value,{0:1,1:0})},closePopover(){l.value!==1&&(l.value=1)},close(e){r.closePopover();let a=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?o(e):o(r.button):o(r.button);a==null||a.focus()}};J(ae,r),ge($(()=>M(l.value,{0:L.Open,1:L.Closed})));let y={buttonId:r.buttonId,panelId:r.panelId,close(){r.closePopover()}},m=ue(),I=m==null?void 0:m.registerPopover,[F,p]=pe(),v=ve({mainTreeNodeRef:m==null?void 0:m.mainTreeNodeRef,portals:F,defaultContainers:[t,P]});function u(){var e,a,n,c;return(c=m==null?void 0:m.isFocusWithinPopoverGroup())!=null?c:((e=b.value)==null?void 0:e.activeElement)&&(((a=o(t))==null?void 0:a.contains(b.value.activeElement))||((n=o(P))==null?void 0:n.contains(b.value.activeElement)))}return z(()=>I==null?void 0:I(y)),ce((g=b.value)==null?void 0:g.defaultView,"focus",e=>{var a,n;e.target!==window&&e.target instanceof HTMLElement&&l.value===0&&(u()||t&&P&&(v.contains(e.target)||(a=o(r.beforePanelSentinel))!=null&&a.contains(e.target)||(n=o(r.afterPanelSentinel))!=null&&n.contains(e.target)||r.closePopover()))},!0),de(v.resolveContainers,(e,a)=>{var n;r.closePopover(),be(a,Pe.Loose)||(e.preventDefault(),(n=o(t))==null||n.focus())},$(()=>l.value===0)),()=>{let e={open:l.value===0,close:r.close};return k(_,[k(p,{},()=>R({theirProps:{...s,...S},ourProps:{ref:f},slot:e,slots:d,attrs:S,name:"Popover"})),k(v.MainTreeNode)])}}}),Be=K({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(s,{attrs:d,slots:S,expose:N}){var g;let f=(g=s.id)!=null?g:`headlessui-popover-button-${j()}`,l=X("PopoverButton"),t=$(()=>H(l.button));N({el:l.button,$el:l.button}),ee(()=>{l.buttonId.value=f}),te(()=>{l.buttonId.value=null});let w=ue(),h=w==null?void 0:w.closeOthers,P=ye(),b=$(()=>P===null?!1:P.value===l.panelId.value),i=E(null),r=`headlessui-focus-sentinel-${j()}`;b.value||z(()=>{l.button.value=o(i)});let y=me($(()=>({as:s.as,type:d.type})),i);function m(e){var a,n,c,x,B;if(b.value){if(l.popoverState.value===1)return;switch(e.key){case T.Space:case T.Enter:e.preventDefault(),(n=(a=e.target).click)==null||n.call(a),l.closePopover(),(c=o(l.button))==null||c.focus();break}}else switch(e.key){case T.Space:case T.Enter:e.preventDefault(),e.stopPropagation(),l.popoverState.value===1&&(h==null||h(l.buttonId.value)),l.togglePopover();break;case T.Escape:if(l.popoverState.value!==0)return h==null?void 0:h(l.buttonId.value);if(!o(l.button)||(x=t.value)!=null&&x.activeElement&&!((B=o(l.button))!=null&&B.contains(t.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),l.closePopover();break}}function I(e){b.value||e.key===T.Space&&e.preventDefault()}function F(e){var a,n;s.disabled||(b.value?(l.closePopover(),(a=o(l.button))==null||a.focus()):(e.preventDefault(),e.stopPropagation(),l.popoverState.value===1&&(h==null||h(l.buttonId.value)),l.togglePopover(),(n=o(l.button))==null||n.focus()))}function p(e){e.preventDefault(),e.stopPropagation()}let v=Z();function u(){let e=o(l.panel);if(!e)return;function a(){M(v.value,{[C.Forwards]:()=>G(e,O.First),[C.Backwards]:()=>G(e,O.Last)})===V.Error&&G(W().filter(n=>n.dataset.headlessuiFocusGuard!=="true"),M(v.value,{[C.Forwards]:O.Next,[C.Backwards]:O.Previous}),{relativeTo:o(l.button)})}a()}return()=>{let e=l.popoverState.value===0,a={open:e},{...n}=s,c=b.value?{ref:i,type:y.value,onKeydown:m,onClick:F}:{ref:i,id:f,type:y.value,"aria-expanded":l.popoverState.value===0,"aria-controls":o(l.panel)?l.panelId.value:void 0,disabled:s.disabled?!0:void 0,onKeydown:m,onKeyup:I,onClick:F,onMousedown:p};return k(_,[R({ourProps:c,theirProps:{...d,...n},slot:a,attrs:d,slots:S,name:"PopoverButton"}),e&&!b.value&&l.isPortalled.value&&k(q,{id:r,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:u})])}}}),Ce=K({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(s,{attrs:d,slots:S,expose:N}){var g;let f=(g=s.id)!=null?g:`headlessui-popover-panel-${j()}`,{focus:l}=s,t=X("PopoverPanel"),w=$(()=>H(t.panel)),h=`headlessui-focus-sentinel-before-${j()}`,P=`headlessui-focus-sentinel-after-${j()}`;N({el:t.panel,$el:t.panel}),ee(()=>{t.panelId.value=f}),te(()=>{t.panelId.value=null}),J(se,t.panelId),z(()=>{var p,v;if(!l||t.popoverState.value!==0||!t.panel)return;let u=(p=w.value)==null?void 0:p.activeElement;(v=o(t.panel))!=null&&v.contains(u)||G(o(t.panel),O.First)});let b=Se(),i=$(()=>b!==null?(b.value&L.Open)===L.Open:t.popoverState.value===0);function r(p){var v,u;switch(p.key){case T.Escape:if(t.popoverState.value!==0||!o(t.panel)||w.value&&!((v=o(t.panel))!=null&&v.contains(w.value.activeElement)))return;p.preventDefault(),p.stopPropagation(),t.closePopover(),(u=o(t.button))==null||u.focus();break}}function y(p){var v,u,e,a,n;let c=p.relatedTarget;c&&o(t.panel)&&((v=o(t.panel))!=null&&v.contains(c)||(t.closePopover(),((e=(u=o(t.beforePanelSentinel))==null?void 0:u.contains)!=null&&e.call(u,c)||(n=(a=o(t.afterPanelSentinel))==null?void 0:a.contains)!=null&&n.call(a,c))&&c.focus({preventScroll:!0})))}let m=Z();function I(){let p=o(t.panel);if(!p)return;function v(){M(m.value,{[C.Forwards]:()=>{var u;G(p,O.First)===V.Error&&((u=o(t.afterPanelSentinel))==null||u.focus())},[C.Backwards]:()=>{var u;(u=o(t.button))==null||u.focus({preventScroll:!0})}})}v()}function F(){let p=o(t.panel);if(!p)return;function v(){M(m.value,{[C.Forwards]:()=>{let u=o(t.button),e=o(t.panel);if(!u)return;let a=W(),n=a.indexOf(u),c=a.slice(0,n+1),x=[...a.slice(n+1),...c];for(let B of x.slice())if(B.dataset.headlessuiFocusGuard==="true"||e!=null&&e.contains(B)){let D=x.indexOf(B);D!==-1&&x.splice(D,1)}G(x,O.First,{sorted:!1})},[C.Backwards]:()=>{var u;G(p,O.Previous)===V.Error&&((u=o(t.button))==null||u.focus())}})}v()}return()=>{let p={open:t.popoverState.value===0,close:t.close},{focus:v,...u}=s,e={ref:t.panel,id:f,onKeydown:r,onFocusout:l&&t.popoverState.value===0?y:void 0,tabIndex:-1};return R({ourProps:e,theirProps:{...d,...u},attrs:d,slot:p,slots:{...S,default:(...a)=>{var n;return[k(_,[i.value&&t.isPortalled.value&&k(q,{id:h,ref:t.beforePanelSentinel,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:I}),(n=S.default)==null?void 0:n.call(S,...a),i.value&&t.isPortalled.value&&k(q,{id:P,ref:t.afterPanelSentinel,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:F})])]}},features:Y.RenderStrategy|Y.Static,visible:i.value,name:"PopoverPanel"})}}}),Oe=K({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(s,{attrs:d,slots:S,expose:N}){let g=E(null),f=he([]),l=$(()=>H(g)),t=fe();N({el:g,$el:g});function w(i){let r=f.value.indexOf(i);r!==-1&&f.value.splice(r,1)}function h(i){return f.value.push(i),()=>{w(i)}}function P(){var i;let r=l.value;if(!r)return!1;let y=r.activeElement;return(i=o(g))!=null&&i.contains(y)?!0:f.value.some(m=>{var I,F;return((I=r.getElementById(m.buttonId.value))==null?void 0:I.contains(y))||((F=r.getElementById(m.panelId.value))==null?void 0:F.contains(y))})}function b(i){for(let r of f.value)r.buttonId.value!==i&&r.close()}return J(re,{registerPopover:h,unregisterPopover:w,isFocusWithinPopoverGroup:P,closeOthers:b,mainTreeNodeRef:t.mainTreeNodeRef}),()=>k(_,[R({ourProps:{ref:g},theirProps:{...s,...d},slot:{},attrs:d,slots:S,name:"PopoverGroup"}),k(t.MainTreeNode)])}});function Ne(s,d){return le(),oe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[ne("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})])}function Te(s,d){return le(),oe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[ne("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}export{Oe as A,Be as G,Te as a,Ce as j,Ne as r,Ee as y};
